<Window x:Class="MovieMaker.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:conv="clr-namespace:MovieMaker.Converters"
        Title="Movie Maker" Height="720" Width="960"
        WindowStartupLocation="CenterScreen">
  <Window.Resources>
    <conv:NullToVisibilityConverter x:Key="NullToVisibility"/>
    <BooleanToVisibilityConverter x:Key="BoolToVisibility"/>
  </Window.Resources>

  <Grid Margin="16">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,12">
      <TextBlock Text="動画タイトル" Width="90" VerticalAlignment="Center"/>
      <TextBox Text="{Binding Title, UpdateSourceTrigger=PropertyChanged}" Width="520"/>
    </StackPanel>

    <Border Grid.Row="1" BorderBrush="#999" BorderThickness="1" CornerRadius="6"
            Background="#F8F8F8" AllowDrop="True"
            Drop="DropArea_OnDrop" DragEnter="DropArea_OnDragEnter">
      <Grid Margin="12">
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <TextBlock Text="ここに画像ファイルと音楽ファイルをドロップ"
                   FontSize="14" Foreground="#555" Margin="0,0,0,8"/>
        <Border Grid.Row="1" BorderBrush="#CCC" BorderThickness="1" CornerRadius="4" Background="White">
          <Grid>
            <Image Source="{Binding ImagePreview}" Stretch="Uniform"/>
            <TextBlock Text="プレビューなし" Foreground="#999"
                       HorizontalAlignment="Center" VerticalAlignment="Center"
                       Visibility="{Binding ImagePreview, Converter={StaticResource NullToVisibility}}"/>
          </Grid>
        </Border>
      </Grid>
    </Border>

    <Grid Grid.Row="2" Margin="0,12,0,12">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="Auto"/>
      </Grid.ColumnDefinitions>

      <StackPanel>
        <TextBlock Text="{Binding ImageFileLabel}"/>
        <TextBlock Text="{Binding AudioFileLabel}"/>
        <TextBlock Text="{Binding OrientationLabel}"/>
        <TextBlock Text="{Binding AspectLabel}"/>
        <TextBlock Text="{Binding OutputDirectoryLabel}"/>
        <TextBlock Text="{Binding ArchiveDirectoryLabel}"/>
      </StackPanel>

      <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Top">
        <Button Content="設定" Width="80" Command="{Binding OpenSettingsCommand}" Margin="8,0,0,0"/>
        <Button Content="エンコード開始" Width="140" Command="{Binding EncodeCommand}" IsEnabled="{Binding CanEncode}" Margin="8,0,0,0"/>
      </StackPanel>
    </Grid>

    <StackPanel Grid.Row="3">
      <ProgressBar Height="8" IsIndeterminate="True"
                   Visibility="{Binding IsEncoding, Converter={StaticResource BoolToVisibility}}"/>
      <TextBlock Text="{Binding StatusMessage}" Margin="0,8,0,0" TextWrapping="Wrap"/>
    </StackPanel>
  </Grid>
</Window>
